# AI) 토큰 기반 인증 방식에 대해 설명해주세요. 🐱

황병헌

#토큰

#인증(Authentication)

#JWT(JSON Web Token)

#세션과 비교

## 답변

<aside>
📌 토큰 기반 인증 방식은 사용자의 상태를 저장하지 않는 상태 비저장(stateless) 방식의 인증 시스템입니다. 이 방식에서 사용자는 자신의 로그인 정보를 서버에 전송하고, 서버는 해당 정보를 검증한 후, 정상적인 사용자로 판단되면 암호화된 토큰을 발급하여 클라이언트에게 반환합니다.

이렇게 발급받은 토큰은 클라이언트가 서버에 요청을 보낼 때마다 HTTP 헤더에 포함되어 전송됩니다. 서버는 이 토큰을 해독하여 사용자의 신원과 권한을 확인합니다.

일반적으로 JSON Web Token(JWT) 형태의 토큰이 널리 사용됩니다. JWT는 Header, Payload, Signature 세 부분으로 구성되며 각각 토큰 타입과 알고리즘 정보, 실제 데이터(클레임), 그리고 서명(Header와 Payload를 합친 후 비밀키로 해싱한 값)을 담고 있습니다.

토큰 기반 인증 방식은 세션 기반 인증과 달리 서버 측에서 상태를 유지할 필요가 없으므로 확장성이 좋습니다. 또한 모바일 앱과 같이 쿠키를 지원하지 않는 환경에서도 잘 동작하며 API 호출 등에 대해 간편하게 권한 관리를 할 수 있습니다.

그러나 보안 측면에서 주의해야 할 점도 있습니다. 만약 토큰이 탈취당한다면 공격자가 해당 토큰으로 부정 접근을 시도할 수 있기 때문입니다. 따라서 HTTPS와 같은 안전한 채널을 이용하여 통신하는 것이 중요하며, 필요에 따라서는 토큰 만료 시간 설정 등 추가적인 보안 조치가 필요합니다. / 719 글자

</aside>

## **꼬리 질문**

### **토큰이 탈취당하면 어떤 문제가 발생하나요? 그럼 이를 어떻게 방지할 수 있나요?**

- 토큰 기반 인증 방식에서 토큰이 탈취당하면, 그 토큰은 사용자의 신원을 증명하는 수단이므로 공격자는 해당 토큰을 이용해 사용자를 사칭할 수 있습니다. 이 경우 공격자는 사용자의 권한으로 데이터를 조회하거나 수정하는 등의 작업을 수행할 수 있어 매우 큰 보안 문제가 발생합니다.
- 토큰 탈취를 방지하기 위한 몇 가지 방법은 다음과 같습니다
    - HTTPS 사용: 모든 데이터 전송 시 HTTPS와 같은 안전한 프로토콜을 사용하여 네트워크 상에서 데이터가 노출되는 것을 방지합니다.
    - 토큰 만료시간 설정: 특정 시간 후에 자동으로 만료되도록 토큰의 유효 기간을 설정합니다. 이렇게 하면 탈취된 토큰이 계속해서 사용될 가능성을 줄일 수 있습니다.
    - Refresh Token 활용: Refresh Token과 Access Token 두 종류의 토큰을 함께 활용하여, Access Token은 짧은 유지 시간 동안만 유효하도록 하고, Refresh Token으로 새로운 Access Token을 발급받는 구조를 활용할 수 있습니다.
    - SameSite Cookie 옵션 설정: 웹 브라우저에서 제공하는 SameSite 옵션으로 CSRF 공격에 대비할 수 있으며, Strict나 Lax 등 적절한 옵션 값을 설정하여 요청 별로 쿠키 전송 여부를 제어할 수 있습니다.
    - 보안 관련 HTTP Header 설정: HTTP 응답 헤더에 보안 관련 설정들(HTTP Strict Transport Security(HSTS), X-Content-Type-Options, X-Frame-Options 등)을 추가하여 웹 앱의 보안성 강화에 기여합니다.
- 강력한 인증 체계와 함께 이러한 추가적인 보호 조치들이 적절하게 구현되면, 서비스는 안전성과 신뢰성 두 가지 모두를 확보할 수 있게 됩니다.

### **세션 기반 인증과 토큰 기반 인증의 차이점은 무엇인가요?**

- 세션 기반 인증은 보다 전통적인 방식으로 많은 웹 앱에서 사용되어 왔으며, 개념적으로 간단하고 구현하기도 비교적 쉽습니다. 하지만 확장성과 분산환경 지원 면에서 제약사항이 있습니다.
- 토큰 기반 인증은 RESTful API와 같은 분산 환경에서 더 자주 사용되며, 확장성과 유연성 면에서 용이합니다. 또한 다중 도메인 및 모바일 앱 등 여러 종류의 클라이언트와 함께 작동하는 데 장점을 가집니다. 그러나 보안 관련 추가 조치가 필요하며 일부 복잡성도 존재할 수 있습니다.
- 어떤 방식을 선택할 것인지는 앱의 요구 사항 및 개발 환경에 따라 결정되어야 합니다.

## 추가 개념

- SameSite
    
    웹 브라우저에서 쿠키를 전송할 때, 해당 쿠키가 어떤 상황에서 전송될 수 있는지 제어하는 기능입니다. SameSite 옵션은 Cross-Site Request Forgery (CSRF) 공격을 방지하고 개인정보 보호를 강화하기 위해 사용됩니다.
    
    SameSite 옵션은 다음과 같이 세 가지 값으로 설정할 수 있습니다:
    
    Strict: SameSite=Strict로 설정된 쿠키는 완전히 동일한 사이트(Origin)로의 요청에만 쿠키를 함께 전송합니다. 다른 도메인으로의 요청에는 쿠키가 포함되지 않습니다.Lax: SameSite=Lax로 설정된 쿠키는 일부 상황에서는 외부 사이트로의 요청에도 함께 전송될 수 있습니다. 예를 들어, 사용자가 링크를 클릭하여 외부 사이트로 이동하는 경우, Lax 옵션이 설정된 쿠키가 함께 전송됩니다. 그러나 POST 메소드 등을 통한 요청은 제외됩니다.None: SameSite=None; Secure로 설정된 쿠키는 모든 요청에 대해 함께 전송됩니다. 이 옵션은 크로스 사이트 도메인 간(Ajax 등) 데이터 교환을 위해 필요한 경우 사용되며, Secure 속성을 추가하여 HTTPS 연결에서만 사용 가능합니다.
    
    SameSite 옵션을 활용하면 CSRF 공격을 어느 정도 방지할 수 있습니다. CSRF 공격은 악의적인 웹사이트에서 피해자의 브라우저를 이용하여 인증된 세션 정보가 포함된 요청을 다른 도메인으로 보내려고 할 때 발생합니다. SameSite=Strict나 SameSite=Lax 옵션을 사용하면 해당 도메인과 관련 없는 외부 사이트로의 요청에 대해서는 인증 정보가 포함되지 않으므로 CSRF 공격 범위를 줄일 수 있습니다.
    
    하지만 SameSite 옵션만으로 모든 보안 문제를 해결할 수 있는 것은 아닙니다. 여전히 기타 보안 조치와 함께 사용해야 하며, 중요한 작업(예: 금융 거래)에 대해서는 추가적인 보안 검증 및 조치가 필요합니다.
    

---

⚠️여기에 각주내용 및 출처, 그림 제목 등에 대해서 달아주세요!!!

표: 노션에서 제공해주는 기본 표 사용. 데이터베이스X

그림: 피그잼으로 도식화하여 사용 ~ 임시로 레퍼런스 사용 가능

코드: 노션에서 제공해주는 코드 블럭 사용 

단축키: ```(백틱 3개)

`백틱`: 메서드 및 코드 블럭에서 사용한 내용을 본문에서 언급할 때 

단축키: 해당 내용을 드래그하여 ctrl+E

인용: 노션에서 제공해주는 기본 스타일 사용

출처가 필요한 내용: *기울게* → 추후 일괄 수정 예정*

⚠️ 질문에 대한 답변 완료 및 저작권, 맞춤법 등의 추가 검사까지 완료

→페이지 아이콘 바꾸기 ✅ 해당 아이콘으로 페이지 아이콘을 바꿔주세요!