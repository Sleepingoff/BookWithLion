# 7. 웹 보안에서 CSRF(Cross-Site Request Forgery) 공격이란 무엇이며, 방어하는 방법은 무엇인가요?

작성자 이름 나열하는 곳 ex) 이지현 김모건 임연정

💡 질문에 대한 정보: ex) 이런 질문은 주로 ~ 한 의도로 ~을 알아보기 위해 합니다.

## 답변

<aside>
📌 CSRF 공격에서는 공격자가 무고한 최종 사용자를 속여 의도하지 않은 웹 요청을 제출하도록 합니다. 이로 인해 의도하지 않은 클라이언트 또는 서버 데이터 유출, 세션 상태 변경 또는 최종 사용자 계정 조작을 포함할 수 있는 작업이 웹 사이트에서 수행될 수 있습니다.

사용자의 상호 작용이나 지식 없이도 모두 작동할 수 있습니다. 특정 사이트에 대해 사용자가 갖는 신뢰를 활용하는 XSS( 교차 사이트 스크립팅 ) 와 달리 CSRF는 사이트가 사용자 브라우저에 대해 갖고 있는 신뢰를 활용합니다

"CSRF"라는 용어는 헤더 데이터, 양식 데이터 또는 쿠키를 사용하여 이러한 공격을 테스트하고 방지하는 기술과 같은 CSRF 공격에 대한 방어의 약어로도 사용됩니다.

</aside>

### CSRF 공격은 주로 세 가지 유형으로 분류됩니다:

1. **Traditional CSRF:**
    - **기술적 개요:** 기존의 CSRF 공격은 인증된 사용자의 세션을 사용하여 악의적인 작업을 수행합니다. 이 공격의 성공은 사용자가 공격이 이루어지는 동안 신뢰된 사이트에 로그인해 있어야 합니다.
    - **방어 방법:** CSRF 토큰이나 동일 출처 정책(Same-Origin Policy, SOP)를 사용하여 요청이 유효한 출처에서 발생했는지 확인합니다.
2. **Stored CSRF:**
    - **기술적 개요:** 이 유형의 CSRF 공격은 악성 코드나 페이로드가 목표 사이트에 저장됩니다. 사용자가 이 사이트에 액세스하면 악성 코드가 실행되어 CSRF 공격이 발생합니다.
    - **방어 방법:** 입력 유효성 검사와 콘텐츠 보안 정책(Content Security Policy, CSP)를 사용하여 스크립트의 실행을 제한합니다.
3. **AJAX-based CSRF:**
    - **기술적 개요:** AJAX 기술을 사용한 CSRF 공격은 페이지를 새로 고침하지 않고도 백그라운드에서 악의적인 요청을 수행합니다. 이 유형의 공격은 복잡하며 피해를 입히기 쉽습니다.
    - **방어 방법:** 웹 애플리케이션에 CSRF 토큰을 도입하고, XMLHttpRequest 객체를 사용하여 요청을 보내는 경우에도 토큰을 포함시키는 것이 필요합니다. 또한 SOP를 강화하여 악의적인 사이트에서 AJAX 요청을 차단할 수 있습니다.

## **꼬리 질문**

### **CSRF 공격을 방어할 수 있는 방법은 어떤 것들이 있을까요?**

### **1. CSRF 토큰 사용:**

- **설명:** 서버는 각 세션 또는 폼에 대해 고유한 토큰을 생성합니다. 클라이언트는 폼 제출 또는 AJAX 요청 시 이 토큰을 포함하여 보내야 하며, 서버는 이 토큰을 검증합니다.
- **방법:**
    - **세션 기반 토큰:** 사용자 세션마다 고유한 토큰을 생성하여 세션에 저장합니다.
    - **동기 토큰:** 각 폼에 대해 고유한 토큰을 생성하고, 폼 제출 시 함께 보냅니다.

### **2. Same-Origin Policy (SOP) 및 Cross-Origin Resource Sharing (CORS):**

- **설명:** SOP는 페이지가 다른 도메인의 리소스를 요청하지 못하도록 제한하는 보안 정책입니다. CORS는 SOP를 완화하여 신뢰할 수 있는 도메인 간의 리소스 공유를 허용합니다.

### **3. Double Submit Cookie:**

- **설명:** 이 방식은 서버와 클라이언트 모두에서 사용하는 두 개의 동일한 토큰을 활용합니다. 하나의 토큰은 쿠키에, 다른 하나는 HTTP 파라미터에 포함되어 서버로 전송됩니다.

### **4. Custom HTTP Headers:**

- **설명:** 많은 CSRF 공격이 폼 데이터를 사용합니다. 웹 어플리케이션은 사용자 정의 HTTP 헤더를 확인하여 AJAX 요청이나 API 호출이 유효한지 판별할 수 있습니다.

### **5. Anti-CSRF Library & Framework:**

- **설명:** 대부분의 웹 프레임워크와 보안 라이브러리는 CSRF 방어 메커니즘을 내장하고 있습니다. 예를 들어, Django, Rails, Laravel 등이 있습니다. 이러한 라이브러리 및 프레임워크를 사용하면, 보안 표준을 쉽게 준수할 수 있습니다.

### **6. User Interaction:**

- **설명:** 중요한 트랜잭션을 수행하기 전에 사용자 인터랙션(예: re-authentication, CAPTCHA, OTP 등)을 요구함으로써, CSRF 공격을 방어할 수 있습니다.

### **두번째 질문**

질문에 대한 **요약** 답변

## 추가 개념

### **제목 heading3**

내용

---

⚠️여기에 각주내용 및 출처, 그림 제목 등에 대해서 달아주세요!!!

표: 노션에서 제공해주는 기본 표 사용. 데이터베이스X

그림: 피그잼으로 도식화하여 사용 ~ 임시로 레퍼런스 사용 가능

코드: 노션에서 제공해주는 코드 블럭 사용 

단축키: ```(백틱 3개)

`백틱`: 메서드 및 코드 블럭에서 사용한 내용을 본문에서 언급할 때 

단축키: 해당 내용을 드래그하여 ctrl+E

인용: 노션에서 제공해주는 기본 스타일 사용

출처가 필요한 내용: *기울게* → 추후 일괄 수정 예정*

⚠️ 질문에 대한 답변 완료 및 저작권, 맞춤법 등의 추가 검사까지 완료

→페이지 아이콘 바꾸기 ✅ 해당 아이콘으로 페이지 아이콘을 바꿔주세요!